# Story 1.5 - DOI Data Validation: Detect and Correct Wrong Values

## Status
Draft

## Story Statement
As a user, I want the web interface to validate existing BibTeX field values against authoritative DOI.org data when a DOI is available, so that I can identify and correct incorrect or outdated bibliographic information in my entries.

## Acceptance Criteria
- When a DOI is present (original or fetched), compare existing field values against DOI.org data
- Identify fields with incorrect, incomplete, or outdated values
- Highlight conflicting values with clear before/after comparison
- Provide option to accept DOI.org corrections or keep original values
- Show validation warnings for fields that don't match authoritative data
- Handle cases where DOI.org data may be incomplete or different

## Dev Notes

**Previous Story Insights:**
- DOI fetching from CrossRef and arXiv already implemented
- DOI.org BibTeX data retrieval working
- UI shows API source attribution
- Real-time updates during processing

**Data Models:**
- Field conflict detection: original value vs DOI.org value
- Validation result with conflict information
- User choice tracking for corrections

**API Specifications:**
- DOI.org returns authoritative BibTeX data
- Field-by-field comparison needed
- Handle missing fields in DOI.org data

**Component Specifications:**
- Conflict highlighting in BibTeXEditor
- Accept/Reject buttons for corrections
- Warning alerts for data mismatches

**File Locations:**
- `src/hooks/useApiIntegration.ts` (add conflict detection)
- `src/components/features/BibTeXEditor/BibTeXEditor.tsx` (conflict UI)
- `src/hooks/useValidation.ts` (conflict validation)

**Testing Requirements:**
- Unit tests for field comparison logic
- Integration tests for conflict detection
- UI tests for accept/reject functionality

**Technical Constraints:**
- Preserve user intent when DOI.org data differs
- Handle various field formats and normalizations
- Performance considerations for large BibTeX files

## Tasks / Subtasks

1. Implement field conflict detection in API integration hook
2. Add conflict UI components to BibTeXEditor
3. Create accept/reject functionality for corrections
4. Update validation to highlight data conflicts
5. Write unit and integration tests for conflict detection

## Project Structure Notes
All components and files should follow the structure defined in `architecture/source-tree.md`. No conflicts identified.
