# Story 1.3 - API Integration: DOI and arXiv Fetching Logic

## Status
Draft

## Story Statement
As a user, I want the web interface to automatically fetch missing BibTeX fields using DOI and arXiv APIs, so that my bibliographic entries are complete and accurate without manual effort.

## Acceptance Criteria
- For entries missing DOI, the app can query arXiv API to retrieve DOI if arXiv ID is present
- For entries with DOI, the app can fetch BibTeX data from DOI.org API
- Fetched data is used to fill in missing fields and suggest corrections
- UI displays updated entries and highlights changes made by API integration
- All API logic matches the Python bibcheck tool's behavior
- Comprehensive error handling for failed API requests
- Unit and integration tests for API integration and data merging

## Dev Notes

**Previous Story Insights:** 
- File upload, parsing, and validation logic implemented in Stories 1.1 and 1.2
- UI components for entry display and validation results complete

**Data Models:** 
- BibTeX entry structure with API-fetched fields
- API response models for DOI.org and arXiv
[Source: architecture/front-end-architecture.md#component-standards]

**API Specifications:** 
- DOI.org API: Fetch BibTeX data for given DOI
- arXiv API: Retrieve DOI for given arXiv ID
[Source: architecture/front-end-architecture.md#api-integration]

**Component Specifications:** 
- API service module: Handles requests to DOI.org and arXiv
- UI updates: Highlights fields updated via API
[Source: architecture/front-end-architecture.md#api-integration]

**File Locations:** 
- `src/services/api/bibtexApi.ts`
- `src/services/api/doiApi.ts`
- `src/components/features/BibTeXEditor/BibTeXEditor.tsx`
- `src/hooks/useValidation.ts`
[Source: architecture/source-tree.md]

**Testing Requirements:** 
- Unit tests for API service modules (request/response handling)
- Integration tests for API-driven field updates
- Error handling tests for failed API requests
[Source: architecture/testing-strategy.md]

**Technical Constraints:** 
- API logic must match Python bibcheck tool's rules
- Use TypeScript for all new code

## Tasks / Subtasks

1. Implement API service modules for DOI.org and arXiv [Source: architecture/front-end-architecture.md]
2. Integrate API fetching logic into validation flow [Source: architecture/front-end-architecture.md]
3. Update BibTeXEditor to highlight API-driven changes [Source: architecture/front-end-architecture.md]
4. Handle errors and display user feedback for failed requests [Source: architecture/front-end-architecture.md]
5. Write unit and integration tests for API modules and data merging [Source: architecture/testing-strategy.md]

## Project Structure Notes
All components and files should follow the structure defined in `architecture/source-tree.md`. No conflicts identified.
